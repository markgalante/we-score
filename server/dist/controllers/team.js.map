{"version":3,"file":"team.js","sourceRoot":"/src/","sources":["controllers/team.ts"],"names":[],"mappings":";;;AASA,sCAGmB;AAaZ,MAAM,UAAU,GAAG,KAAK,EAC7B,GAAY,EACZ,GAAa,EACb,EAAE;IACF,IAAI;QACF,MAAM,IAAI,GAAG,MAAM,aAAS,CAAC,MAAM,CAAC;YAClC,GAAG,GAAG,CAAC,IAAI;YACX,MAAM,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;SAC1B,CAAC,CAAC;QACH,MAAM,sBAAsB,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,CAAC,CAAA;QAC5C,GAAG;aACF,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC;YACJ,OAAO,EAAE,sCAAsC;YAC/C,IAAI;SACL,CAAC,CAAA;KACH;IAAC,OAAO,KAAK,EAAE;QACd,GAAG;aACF,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC;YACJ,OAAO,EAAE,0BAA0B;YACnC,KAAK;SACN,CAAC,CAAA;KACH;AACH,CAAC,CAAA;AAxBY,QAAA,UAAU,cAwBtB;AAED,MAAM,sBAAsB,GAAG,KAAK,EAClC,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACF,IAAI;QACF,MAAM,eAAW;aAChB,SAAS,CAAC;YACT,GAAG,EAAE,GAAG,CAAC,IAAI,CAAC,QAAQ;SACvB,EAAE;YACD,KAAK,EAAE;gBACL,KAAK,EAAE,IAAI;aACZ;SACF,CAAC,CAAC;KACJ;IAAC,OAAO,KAAK,EAAE;QACd,GAAG;aACF,MAAM,CAAC,GAAG,CAAC;aACX,IAAI,CAAC;YACJ,OAAO,EAAE,mCAAmC;YAC5C,KAAK;SACN,CAAC,CAAA;KACH;AACH,CAAC,CAAA","sourcesContent":["import type {\n  Request,\n  Response,\n} from 'express';\nimport type {\n  Document,\n  Types,\n} from 'mongoose'\n\nimport {\n  Team as TeamModel,\n  League as LeagueModel,\n} from '../models';\n\nimport type {TeamSchema} from '../types';\n\ntype TeamDataType = \n  Document<\n  unknown,\n  any,\n  TeamSchema\n  > & TeamSchema & {\n  _id: Types.ObjectId;\n  }\n\nexport const createTeam = async (\n  req: Request,\n  res: Response,\n) => {\n  try {\n    const data = await TeamModel.create({\n      ...req.body,\n      league: req.body.leagueId,\n    });\n    await addCreatedTeamToLeague(req, res, data)\n    res\n    .status(201)\n    .send({\n      message: \"You have successfully created a team\",\n      data,\n    })\n  } catch (error) {\n    res\n    .status(422)\n    .send({\n      message: \"Failure to create league\",\n      error,\n    })\n  }\n}\n\nconst addCreatedTeamToLeague = async (\n  req: Request,\n  res: Response,\n  data: TeamDataType,\n) => {\n  try {\n    await LeagueModel\n    .updateOne({\n      _id: req.body.leagueId\n    }, {\n      $push: {\n        teams: data\n      }\n    });\n  } catch (error) {\n    res\n    .status(422)\n    .send({\n      message: \"Failure to add team to the league\",\n      error,\n    })\n  }\n}"]}